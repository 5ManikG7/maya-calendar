!function(e){var t={};function a(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){"use strict";a.r(t);const n=e=>{const t=[144e3,7200,360,20,1];let a=0;for(let n=0;n<t.length;n++)a+=e[n]*t[n];return a},o=(e,t)=>{const a=n(e.getLongCount())+t,o=new Date(-4713,10,24);return o.setDate(o.getDate()+a),o},r=(e,t)=>{const a=new Date(-4713,10,24),n=Math.round((e-a)/864e5);return new c((e=>{const t=[144e3,7200,360,20,1],a=[];let n=e;for(let e=0;e<t.length;e++)a.push(Math.floor(n/t[e])),n%=t[e];return a})(n-t))},l=e=>{const t=(e-new Date(200,2,1))/864e5,a=Math.floor(t/36524),n=a-Math.floor((a+2)/4),o=new Date(e.getFullYear(),e.getMonth(),e.getDate());return o.setDate(e.getDate()-n),o},u=e=>{const t=(e-new Date(200,2,1))/864e5,a=Math.floor(t/36524),n=a-Math.floor((a+2)/4),o=new Date(e.getFullYear(),e.getMonth(),e.getDate());return o.setDate(e.getDate()+n),o},g=["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Edznab","Cauac","Ahau"],i=["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"];class c{constructor(e){this.longCount=e}getLongCount(){return this.longCount}setTzolkin(){const e=n(this.longCount);let t=(e+4)%13;0===t&&(t=13);const a=g[(e+19)%20];this.tzolkin=[t,a]}getTzolkin(){return this.tzolkin}setHaab(){const e=(n(this.longCount)+348)%365;let t,a;e<361?(t=e%20,a=i[Math.floor(e/20)]):(t=e-360,a="Uayeb"),this.haab=[t,a]}getHaab(){return this.haab}setLordOfNight(){const e=n(this.longCount);this.lordOfNight=e%9==0?9:e%9}getLordOfNight(){return this.lordOfNight}}const m={glyphPanel:document.querySelector(".glyph-panel"),mayaForm:document.getElementById("maya-form"),correlationForm:document.getElementById("corr-form"),gregorianForm:document.getElementById("greg-form"),julianForm:document.getElementById("jul-form"),longCountInput:document.querySelectorAll(".lc-index"),longCount:{0:document.getElementById("lc-0"),1:document.getElementById("lc-1"),2:document.getElementById("lc-2"),3:document.getElementById("lc-3"),4:document.getElementById("lc-4")},lcGlyphs:{0:document.getElementById("lc-0-coef"),1:document.getElementById("lc-1-coef"),2:document.getElementById("lc-2-coef"),3:document.getElementById("lc-3-coef"),4:document.getElementById("lc-4-coef")},calendarRound:document.getElementById("calendar-round"),tzolkinCoef:document.getElementById("tzolkin-coef"),tzolkinName:document.getElementById("tzolkin-name"),glyphG:document.getElementById("glyph-G"),haabCoef:document.getElementById("haab-coef"),haabName:document.getElementById("haab-name"),constant:document.getElementById("constant"),gregorianDay:document.getElementById("greg-day"),gregorianMonth:document.getElementById("greg-month"),gregorianYear:document.getElementById("greg-year"),gregorianEra:document.getElementById("greg-era"),julianDay:document.getElementById("jul-day"),julianMonth:document.getElementById("jul-month"),julianYear:document.getElementById("jul-year"),julianEra:document.getElementById("jul-era")},s=()=>m.constant.value?parseInt(m.constant.value):0;(function(){const e={};const t=(t,a)=>{const n=e.mayaDate.getLongCount().slice();"increase"===t&&"3"!==a&&n[a]<19?n[a]++:"increase"===t&&"3"===a&&n[a]<17?n[a]++:"decrease"===t&&n[a]>0&&n[a]--,e.mayaDate=new c(n),e.mayaDate.setTzolkin(),e.mayaDate.setHaab(),e.mayaDate.setLordOfNight()},a=()=>{const t=(()=>{const e=[];return m.longCountInput.forEach(t=>{t.value?e.push(parseInt(t.value)):e.push(0)}),e})();e.mayaDate=new c(t),e.mayaDate.setTzolkin(),e.mayaDate.setHaab(),e.mayaDate.setLordOfNight()},n=()=>{const[t,a,n]=(()=>{let e,t;const a=m.gregorianEra.value;return t=m.gregorianYear.value?parseInt(m.gregorianYear.value):1,"BCE"===a&&(t=-(t-1)),[t,parseInt(m.gregorianMonth.value),e=m.gregorianDay.value?parseInt(m.gregorianDay.value):1]})();e.gregDate.setFullYear(t),e.gregDate.setMonth(a),e.gregDate.setDate(n)},g=()=>{const[t,a,n]=(()=>{let e,t;const a=m.julianEra.value;return t=m.julianYear.value?parseInt(m.julianYear.value):1,"BCE"===a&&(t=-(t-1)),[t,parseInt(m.julianMonth.value),e=m.julianDay.value?parseInt(m.julianDay.value):1]})();e.julianDate.setFullYear(t),e.julianDate.setMonth(a),e.julianDate.setDate(n)};function i(){e.constant=s(),e.gregDate=o(e.mayaDate,e.constant)}function d(){e.julianDate=l(e.gregDate)}function y(){e.constant=s(),e.mayaDate=r(e.gregDate,e.constant),e.mayaDate.setTzolkin(),e.mayaDate.setHaab(),e.mayaDate.setLordOfNight()}const D=(e,t,a)=>{(e=>{const t=e.getLongCount(),a=e.getTzolkin(),n=e.getHaab(),o=e.getLordOfNight();for(let e=0;e<5;e++)m.longCount[e].value=t[e],m.lcGlyphs[e].src=`img/number-${t[e]}.png`;m.calendarRound.innerHTML=`${a.join(" ")} ${n.join(" ")}`,m.tzolkinCoef.src=`img/number-${a[0]}.png`,m.tzolkinName.src=`img/${a[1]}.png`,m.glyphG.src=`img/G${o}.png`,0===n[0]?m.haabCoef.src="img/chum.png":m.haabCoef.src=`img/number-${n[0]}.png`,m.haabName.src=`img/${n[1]}.png`})(e),(e=>{let t=e.getFullYear();const a=t>0?"CE":"BCE";"BCE"===a&&(t=-(t-1));const n=e.getMonth(),o=e.getDate();m.gregorianDay.value=o,m.gregorianMonth.value=n,m.gregorianYear.value=t,m.gregorianEra.value=a})(t),(e=>{let t=e.getFullYear();const a=t>0?"CE":"BCE";"BCE"===a&&(t=-(t-1));const n=e.getMonth(),o=e.getDate();m.julianDay.value=o,m.julianMonth.value=n,m.julianYear.value=t,m.julianEra.value=a})(a)};return{init:function(){e.gregDate=new Date,e.julianDate=l(e.gregDate),e.constant=584286,e.mayaDate=r(e.gregDate,e.constant),e.mayaDate.setTzolkin(),e.mayaDate.setHaab(),e.mayaDate.setLordOfNight(),D(e.mayaDate,e.gregDate,e.julianDate),m.glyphPanel.addEventListener("click",a=>{a.target.dataset.action&&(t(a.target.dataset.action,a.target.dataset.index),i(),d(),D(e.mayaDate,e.gregDate,e.julianDate))}),m.mayaForm.addEventListener("input",t=>{a(),i(),d(),D(e.mayaDate,e.gregDate,e.julianDate)}),m.correlationForm.addEventListener("input",t=>{i(),d(),D(e.mayaDate,e.gregDate,e.julianDate)}),m.gregorianForm.addEventListener("input",t=>{n(),y(),d(),D(e.mayaDate,e.gregDate,e.julianDate)}),m.julianForm.addEventListener("input",t=>{g(),e.gregDate=u(e.julianDate),y(),D(e.mayaDate,e.gregDate,e.julianDate)})}}})().init()}]);